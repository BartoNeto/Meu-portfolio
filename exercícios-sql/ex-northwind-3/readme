Exercícios de SQL - Joins, Agregações e Relatórios

Sobre o Projeto

Este repositório contém uma coleção de 25 exercícios de SQL que exploram operações de junção (JOIN), agregações, filtros avançados e formatação de dados, utilizando uma variação do banco de dados Northwind (com tabelas suffixadas com "T", como CustomersT, OrdersT, etc.). Os exercícios cobrem desde consultas básicas até relatórios complexos, com foco em cenários de negócios, como análise de vendas, estoque e relacionamentos entre entidades. O objetivo é demonstrar proficiência em SQL para análise de dados, geração de relatórios e manipulação de bancos de dados relacionais.

Habilidades Demonstradas
Junções: Uso de INNER JOIN, LEFT JOIN, RIGHT JOIN e CROSS JOIN para combinar dados de múltiplas tabelas.

Agregações: Funções como COUNT, SUM, MIN, MAX com GROUP BY e HAVING.

Filtros Avançados: Condições com WHERE, IN, NOT IN, subconsultas e verificação de nulos.

Formatação de Dados: Uso de CONCAT, FORMAT, DATEDIFF e CAST para apresentar resultados de forma amigável.

Análise Temporal: Manipulação de datas com DATEPART, MIN, MAX e formatação personalizada.

Relatórios de Negócios: Geração de rankings, cálculos de estoque e análises de vendas.

Subconsultas: Uso de subconsultas para cálculos comparativos e filtros dinâmicos.

Estrutura do Banco de Dados

Os exercícios utilizam uma variação do banco de dados Northwind, com tabelas suffixadas com "T" (ex.: CustomersT, OrdersT). Tabelas principais incluem:

CustomersT: Informações de clientes (CustomerID, CompanyName, ContactName, Country).

ProductsT: Detalhes de produtos (ProductID, ProductName, UnitPrice, UnitsInStock, CategoryID, SupplierID).

OrdersT: Pedidos realizados (OrderID, CustomerID, EmployeeID, OrderDate, ShipVia, Freight, ShipCountry).

Order DetailsT: Itens dos pedidos (OrderID, ProductID, UnitPrice, Quantity).

EmployeesT: Informações de funcionários (EmployeeID, FirstName, LastName, HireDate, ReportsTo).

CategoriesT: Categorias de produtos (CategoryID, CategoryName).

SuppliersT: Fornecedores (SupplierID, CompanyName, Country).

ShippersT: Transportadoras (ShipperID, CompanyName).

Relacionamentos:
CustomersT.CustomerID → OrdersT.CustomerID (1:N)

ProductsT.CategoryID → CategoriesT.CategoryID (N:1)

ProductsT.SupplierID → SuppliersT.SupplierID (N:1)

OrdersT.OrderID → Order DetailsT.OrderID (1:N)

ProductsT.ProductID → Order DetailsT.ProductID (1:N)

EmployeesT.EmployeeID → OrdersT.EmployeeID (1:N)

OrdersT.ShipVia → ShippersT.ShipperID (N:1)

EmployeesT.ReportsTo → EmployeesT.EmployeeID (N:1, auto-relacionamento)

Para recriar o banco, use o script schema.sql (se disponível) ou configure as tabelas conforme necessário.

Como Executar
Pré-requisitos:
Um SGBD compatível (ex.: SQL Server, MySQL, PostgreSQL, SQLite).

Ferramenta para executar scripts SQL (ex.: SQL Server Management Studio, MySQL Workbench, DBeaver).

Configuração:
Certifique-se de que o banco de dados Northwind (ou variação com suffixo "T") está configurado.

Execute um script de inicialização (schema.sql) para criar tabelas e inserir dados de exemplo, se necessário.

Exemplo para SQL Server:

sqlcmd -S servidor -U usuario -P senha -d Northwind -i schema.sql

Execução dos Exercícios:
Cada exercício está em um arquivo SQL (ex.: exercicio1.sql, exercicio2.sql, etc.) ou pode ser executado diretamente no SGBD.

Execute as consultas individualmente:

SOURCE exercicio1.sql;

Ou copie e cole no seu cliente SQL.

Lista de Exercícios
exercicio1.sql: Lista o nome de produtos e suas categorias usando INNER JOIN.
exercicio2.sql: Mostra o OrderID e o nome da empresa do cliente para cada pedido.
exercicio3.sql: Lista todos os clientes e seus pedidos, incluindo clientes sem pedidos (LEFT JOIN).
exercicio4.sql: Lista produtos de fornecedores localizados no Japão.
exercicio5.sql: Formata nomes completos de funcionários em letras maiúsculas.
exercicio6.sql: Conta pedidos por funcionário, incluindo aqueles com zero pedidos.
exercicio7.sql: Calcula o valor total em estoque por fornecedor (acima de $3.000).
exercicio8.sql: Identifica fornecedores sem produtos cadastrados.
exercicio9.sql: Detalha o pedido 10251 com nome do cliente, data, produto, quantidade e preço.
exercicio10.sql: Conta produtos por categoria, incluindo categorias sem produtos.
exercicio11.sql: Lista pedidos registrados por 'Michael Suyama' usando subconsulta.
exercicio12.sql: Gera combinações de categorias e transportadoras com CROSS JOIN.
exercicio13.sql: Calcula o total de frete por cliente e transportadora.
exercicio14.sql: Calcula o tempo de serviço dos funcionários na data de cada pedido.
exercicio15.sql: Gera um relatório formatado de vendas com cliente, quantidade, produto e data.
exercicio16.sql: Identifica o cliente com maior gasto em frete.
exercicio17.sql: Lista categorias nunca vendidas para o México usando NOT IN.
exercicio18.sql: Mostra funcionários e seus supervisores, incluindo aqueles sem supervisor.
exercicio19.sql: Calcula o total de vendas (excluindo frete) por ano.
exercicio20.sql: Lista produtos com "chocolate" no nome, incluindo categoria e fornecedor.
exercicio21.sql: Lista todos os pedidos com nomes dos funcionários associados (RIGHT JOIN).
exercicio22.sql: Calcula a diferença de preço de produtos em relação à média da categoria.
exercicio23.sql: Mostra o primeiro e último pedido de cada cliente.
exercicio24.sql: Lista fornecedores com produtos acima de $50.
exercicio25.sql: Gera um ranking de funcionários por valor total de vendas.
